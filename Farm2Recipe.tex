\documentclass[]{article}
\usepackage{lmodern}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\usepackage{fixltx2e} % provides \textsubscript
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
\else % if luatex or xelatex
  \ifxetex
    \usepackage{mathspec}
  \else
    \usepackage{fontspec}
  \fi
  \defaultfontfeatures{Ligatures=TeX,Scale=MatchLowercase}
\fi
% use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
% use microtype if available
\IfFileExists{microtype.sty}{%
\usepackage{microtype}
\UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\usepackage[margin=1in]{geometry}
\usepackage{hyperref}
\hypersetup{unicode=true,
            pdftitle={Farm2Recipe, Connecting Food Recipes to Local and Organic Products. A Network Science approach.},
            pdfauthor={Juan C. S. Herrera, Carolyn Dimitri},
            pdfborder={0 0 0},
            breaklinks=true}
\urlstyle{same}  % don't use monospace font for urls
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\usepackage{graphicx,grffile}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
\IfFileExists{parskip.sty}{%
\usepackage{parskip}
}{% else
\setlength{\parindent}{0pt}
\setlength{\parskip}{6pt plus 2pt minus 1pt}
}
\setlength{\emergencystretch}{3em}  % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{0}
% Redefines (sub)paragraphs to behave more like sections
\ifx\paragraph\undefined\else
\let\oldparagraph\paragraph
\renewcommand{\paragraph}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
\let\oldsubparagraph\subparagraph
\renewcommand{\subparagraph}[1]{\oldsubparagraph{#1}\mbox{}}
\fi

%%% Use protect on footnotes to avoid problems with footnotes in titles
\let\rmarkdownfootnote\footnote%
\def\footnote{\protect\rmarkdownfootnote}

%%% Change title format to be more compact
\usepackage{titling}

% Create subtitle command for use in maketitle
\newcommand{\subtitle}[1]{
  \posttitle{
    \begin{center}\large#1\end{center}
    }
}

\setlength{\droptitle}{-2em}

  \title{Farm2Recipe, Connecting Food Recipes to Local and Organic Products. A
Network Science approach.}
    \pretitle{\vspace{\droptitle}\centering\huge}
  \posttitle{\par}
    \author{Juan C. S. Herrera, Carolyn Dimitri}
    \preauthor{\centering\large\emph}
  \postauthor{\par}
      \predate{\centering\large\emph}
  \postdate{\par}
    \date{2019-09-29}


\begin{document}
\maketitle

\subsection{Load Libraries}\label{load-libraries}

\begin{Shaded}
\begin{Highlighting}[]
  \KeywordTok{library}\NormalTok{(RJSONIO)}
  \KeywordTok{library}\NormalTok{(ggplot2)}
  \KeywordTok{library}\NormalTok{(cowplot)}
  \KeywordTok{library}\NormalTok{(GGally)}
  \KeywordTok{library}\NormalTok{(RCurl)}
  \KeywordTok{library}\NormalTok{(magick)}
  \KeywordTok{library}\NormalTok{(readxl)}
  \KeywordTok{library}\NormalTok{(RMySQL)}
  \KeywordTok{library}\NormalTok{(reshape)}
  \KeywordTok{library}\NormalTok{(network)}
  \KeywordTok{library}\NormalTok{(statnet)}
  \KeywordTok{library}\NormalTok{(gganimate)}
  \KeywordTok{library}\NormalTok{(ggthemes)}
  \KeywordTok{library}\NormalTok{(beepr)}

  \KeywordTok{set.seed}\NormalTok{(}\DecValTok{8888}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\subsection{Load and prepare data}\label{load-and-prepare-data}

\subsection{1A. Organic producers (Integrity Database.
USDA)}\label{a.-organic-producers-integrity-database.-usda}

This code loads and cleans the data. Subsequequently it searches for the
latitude and longitude using the google maps API This will only work
with your own google maps KEY. Make sure to use that one. Else you can
skip this step and load the data which contains the latitude and
longitude. Next step.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{#Get GPS coordinates for every organic operaration in the US}
\CommentTok{#1. Import operation level}
\NormalTok{opall <-}\StringTok{ }\KeywordTok{as.data.frame}\NormalTok{(}\KeywordTok{read.csv}\NormalTok{(}\KeywordTok{paste0}\NormalTok{(directx,}\StringTok{"op.csv"}\NormalTok{),}\DataTypeTok{stringsAsFactors =} \OtherTok{FALSE}\NormalTok{))}
\CommentTok{#2. Import item level}
\NormalTok{itall <-}\StringTok{ }\KeywordTok{as.data.frame}\NormalTok{(}\KeywordTok{read.csv}\NormalTok{(}\KeywordTok{paste0}\NormalTok{(directx,}\StringTok{"it.csv"}\NormalTok{),}\DataTypeTok{stringsAsFactors =} \OtherTok{FALSE}\NormalTok{))}
\KeywordTok{getwd}\NormalTok{()}
\KeywordTok{dim}\NormalTok{(opall)}
\KeywordTok{dim}\NormalTok{(itall)}

\CommentTok{#3: Merge Operation and item levels}
\NormalTok{lsallall<-}\KeywordTok{merge}\NormalTok{(opall, itall, }\DataTypeTok{by.x=}\StringTok{"op_nopOpID"}\NormalTok{, }\DataTypeTok{by.y=}\StringTok{"ci_nopOpID"}\NormalTok{, }\DataTypeTok{all.y =} \OtherTok{TRUE}\NormalTok{)}

\CommentTok{#send to SQL}
\NormalTok{conn <-}\StringTok{ }\KeywordTok{dbConnect}\NormalTok{(RSQLite}\OperatorTok{::}\KeywordTok{SQLite}\NormalTok{(), }\DataTypeTok{dbname=}\StringTok{"organics.sqlite"}\NormalTok{)}
\KeywordTok{dbWriteTable}\NormalTok{(conn, }\DataTypeTok{value =}\NormalTok{ lsallall, }\DataTypeTok{name =} \StringTok{"allorganicoperations"}\NormalTok{, }\DataTypeTok{overwrite =} \OtherTok{FALSE}\NormalTok{) }
\NormalTok{alloperations<-}\KeywordTok{dbGetQuery}\NormalTok{(conn, }\StringTok{"}
\StringTok{                      SELECT A. *}
\StringTok{                      FROM allorganicoperations A}
\StringTok{                      WHERE TRIM(A.opPA_country) IN ('United States of America (the)')}
\StringTok{                      "}\NormalTok{)}
\KeywordTok{dbWriteTable}\NormalTok{(conn, }\DataTypeTok{value =}\NormalTok{ alloperations, }\DataTypeTok{name =} \StringTok{"USAorganicoperations"}\NormalTok{, }\DataTypeTok{overwrite =} \OtherTok{FALSE}\NormalTok{)}
\NormalTok{geocodeAdddress<-}\StringTok{ }\ControlFlowTok{function}\NormalTok{(address) \{}
  \KeywordTok{require}\NormalTok{(RJSONIO)}

  
\NormalTok{  url <-}\StringTok{ }\KeywordTok{URLencode}\NormalTok{(}\KeywordTok{paste0}\NormalTok{(url, address,keystuff, }\DataTypeTok{sep =} \StringTok{""}\NormalTok{))}
\NormalTok{  x <-}\StringTok{ }\KeywordTok{fromJSON}\NormalTok{(url, }\DataTypeTok{simplify =} \OtherTok{FALSE}\NormalTok{)}
  \ControlFlowTok{if}\NormalTok{ (x}\OperatorTok{$}\NormalTok{status }\OperatorTok{==}\StringTok{ "OK"}\NormalTok{) \{}
\NormalTok{    out <-}\StringTok{ }\KeywordTok{c}\NormalTok{(x}\OperatorTok{$}\NormalTok{results[[}\DecValTok{1}\NormalTok{]]}\OperatorTok{$}\NormalTok{geometry}\OperatorTok{$}\NormalTok{location}\OperatorTok{$}\NormalTok{lng,}
\NormalTok{             x}\OperatorTok{$}\NormalTok{results[[}\DecValTok{1}\NormalTok{]]}\OperatorTok{$}\NormalTok{geometry}\OperatorTok{$}\NormalTok{location}\OperatorTok{$}\NormalTok{lat)}
\NormalTok{  \} }\ControlFlowTok{else}\NormalTok{ \{}
\NormalTok{    out <-}\StringTok{ }\KeywordTok{matrix}\NormalTok{(}\DataTypeTok{nrow=}\DecValTok{2}\NormalTok{,}\DataTypeTok{ncol=}\DecValTok{1}\NormalTok{)}
\NormalTok{  \}  out}\OperatorTok{-}
\NormalTok{\}}


\CommentTok{#Create vector with all the address values}
\NormalTok{alloperations}\OperatorTok{$}\NormalTok{opadresscom <-}\StringTok{ }\KeywordTok{paste}\NormalTok{(alloperations}\OperatorTok{$}\NormalTok{opPA_line1 , alloperations}\OperatorTok{$}\NormalTok{opPA_line2 , alloperations}\OperatorTok{$}\NormalTok{opPA_city , alloperations}\OperatorTok{$}\NormalTok{opPA_state , alloperations}\OperatorTok{$}\NormalTok{opPA_country , alloperations}\OperatorTok{$}\NormalTok{opPA_zip, }\DataTypeTok{sep=}\StringTok{" "}\NormalTok{)}
\CommentTok{#clean}
\NormalTok{alloperations}\OperatorTok{$}\NormalTok{opadfinal<-}\KeywordTok{gsub}\NormalTok{(}\StringTok{"[^0-9}\CharTok{\textbackslash{}\textbackslash{}}\StringTok{.}\CharTok{\textbackslash{}\textbackslash{}}\StringTok{^A-Z}\CharTok{\textbackslash{}\textbackslash{}}\StringTok{^a-z}\CharTok{\textbackslash{}\textbackslash{}}\StringTok{ ]"}\NormalTok{, }\StringTok{""}\NormalTok{, alloperations}\OperatorTok{$}\NormalTok{opadresscom)}
\CommentTok{#Use function, get latitude and longitude from google maps}
\CommentTok{#You will need to re run this several times, excluding those for which you were able to get coordinates. Again, it is important to register for the google maps API so you don't run over the limit og queries. }
\CommentTok{#head(alloperations)}
\CommentTok{#dim(alloperations)}

\NormalTok{alloperations<-}\KeywordTok{read.csv}\NormalTok{(}\StringTok{"/Users/juan/Dropbox/ACADEMICO/NYU PHD/Y2/Independent Study/Organic/food_journal/alloperations.csv"}\NormalTok{)}
\NormalTok{geovector<-}\KeywordTok{as.data.frame}\NormalTok{(alloperations}\OperatorTok{$}\NormalTok{opadfinal)}
\CommentTok{#dim(geovector)}
\NormalTok{geovector<-}\KeywordTok{unique}\NormalTok{(geovector)}
\CommentTok{#dim(geovector)}

\CommentTok{#dim(alloperations)}

\NormalTok{preurl <-}\StringTok{ "https://maps.googleapis.com/maps/api/geocode/json?address="}
\NormalTok{###### }\AlertTok{WARNING}\NormalTok{: USE YOUR OWN GOOGLE MAPS API KEY HERE:}
\NormalTok{keystuff <-}\StringTok{ "YOUR GOOGLE MAPS API KEY HERE"}

\NormalTok{geovector}\OperatorTok{$}\NormalTok{lat<-}\OperatorTok{-}\DecValTok{999}
\NormalTok{geovector}\OperatorTok{$}\NormalTok{lon<-}\OperatorTok{-}\DecValTok{999}
\KeywordTok{head}\NormalTok{(geovector)}
\KeywordTok{dim}\NormalTok{(geovector)}
\ControlFlowTok{for}\NormalTok{(i }\ControlFlowTok{in} \DecValTok{10001}\OperatorTok{:}\DecValTok{15629}\NormalTok{)}
\NormalTok{\{}
\NormalTok{  url<-}\KeywordTok{URLencode}\NormalTok{(}\KeywordTok{paste0}\NormalTok{(preurl, }\KeywordTok{as.character}\NormalTok{(geovector[i,}\DecValTok{1}\NormalTok{]),keystuff, }\DataTypeTok{sep =} \StringTok{""}\NormalTok{))}
\NormalTok{  x <-}\StringTok{ }\KeywordTok{fromJSON}\NormalTok{(url, }\DataTypeTok{simplify =} \OtherTok{FALSE}\NormalTok{)}

  \ControlFlowTok{if}\NormalTok{ (x}\OperatorTok{$}\NormalTok{status }\OperatorTok{==}\StringTok{ "OK"}\NormalTok{) \{}
\NormalTok{    geovector[i,}\DecValTok{2}\NormalTok{]<-}\KeywordTok{as.numeric}\NormalTok{(x}\OperatorTok{$}\NormalTok{results[[}\DecValTok{1}\NormalTok{]]}\OperatorTok{$}\NormalTok{geometry}\OperatorTok{$}\NormalTok{location}\OperatorTok{$}\NormalTok{lat)}
\NormalTok{    geovector[i,}\DecValTok{3}\NormalTok{]<-}\KeywordTok{as.numeric}\NormalTok{(x}\OperatorTok{$}\NormalTok{results[[}\DecValTok{1}\NormalTok{]]}\OperatorTok{$}\NormalTok{geometry}\OperatorTok{$}\NormalTok{location}\OperatorTok{$}\NormalTok{lng)}
\NormalTok{  \} }\ControlFlowTok{else}\NormalTok{ \{}
\NormalTok{    geovector[i,}\DecValTok{2}\NormalTok{]<-}\OperatorTok{-}\DecValTok{888}
\NormalTok{    geovector[i,}\DecValTok{3}\NormalTok{]<-}\OperatorTok{-}\DecValTok{888}
\NormalTok{  \} }
\NormalTok{\}}


\CommentTok{#write.csv(geovector,"geovector.csv")}
\CommentTok{#isitgoodornot <- read.csv("geovector.csv") }

\NormalTok{xx<-}\KeywordTok{URLencode}\NormalTok{(}\KeywordTok{paste0}\NormalTok{(url, }\KeywordTok{as.character}\NormalTok{(geovector[i,}\DecValTok{1}\NormalTok{]),keystuff, }\DataTypeTok{sep =} \StringTok{""}\NormalTok{))}

\ControlFlowTok{for}\NormalTok{(i }\ControlFlowTok{in} \DecValTok{1}\OperatorTok{:}\DecValTok{1}\NormalTok{)}
\NormalTok{\{}
\NormalTok{  lxxx <-}\StringTok{ }\KeywordTok{paste}\NormalTok{(}\KeywordTok{t}\NormalTok{(}\KeywordTok{paste0}\NormalTok{(}\KeywordTok{print}\NormalTok{(}\KeywordTok{geocodeAdddress}\NormalTok{(geovector[i,}\DecValTok{1}\NormalTok{])))),}\DataTypeTok{sep=}\StringTok{"xxx"}\NormalTok{)}
\NormalTok{  lxxx<-}\KeywordTok{as.data.frame}\NormalTok{(}\KeywordTok{t}\NormalTok{(lxxx))}
\NormalTok{  lxxx[}\DecValTok{1}\NormalTok{,}\DecValTok{3}\NormalTok{]<-}\KeywordTok{paste}\NormalTok{(lxxx[}\DecValTok{1}\NormalTok{,}\DecValTok{1}\NormalTok{],lxxx[}\DecValTok{1}\NormalTok{,}\DecValTok{2}\NormalTok{],}\DataTypeTok{sep=}\StringTok{"xxx"}\NormalTok{)}
\NormalTok{  lxxx}
\NormalTok{  geovector[i,}\DecValTok{2}\NormalTok{] <-}\StringTok{ }\NormalTok{(lxxx[}\DecValTok{1}\NormalTok{,}\DecValTok{3}\NormalTok{])}
\NormalTok{\}}
\CommentTok{#head(geovector)}
\KeywordTok{write.csv}\NormalTok{(alloperations, }\StringTok{"alloperations.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\subsection{1B. Organic producers (Integrity Database.
USDA)}\label{b.-organic-producers-integrity-database.-usda}

This code loads and merges the geocoded data.At the end of this code you
will get the final dataset of organic production in the USA

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{#load geocoded data}
\NormalTok{geovector <-}\StringTok{ }\KeywordTok{read.csv}\NormalTok{(}\StringTok{"/Users/juan/Documents/GitHub/SustainableCooking-Source_Local_and_Organic/geovector.csv"}\NormalTok{, }\DataTypeTok{stringsAsFactors =} \OtherTok{FALSE}\NormalTok{)}
\CommentTok{#head(geovector)}

\CommentTok{#load merged USDA'a integrity database dataset}
\NormalTok{data <-}\StringTok{ }\KeywordTok{read.csv}\NormalTok{(}\StringTok{"/Users/juan/Documents/GitHub/SustainableCooking-Source_Local_and_Organic/alloperations.csv"}\NormalTok{)}
\CommentTok{#head(data)}
\CommentTok{#dim(data)}

\CommentTok{#merge}
\NormalTok{production_data<-}\KeywordTok{merge}\NormalTok{(data, geovector, }\DataTypeTok{by.x=}\StringTok{"opadfinal"}\NormalTok{, }\DataTypeTok{by.y=}\StringTok{"alloperations.opadfinal"}\NormalTok{, }\DataTypeTok{all.x =} \OtherTok{TRUE}\NormalTok{)}

\CommentTok{#subset}
\NormalTok{production_data <-}\StringTok{ }\KeywordTok{subset}\NormalTok{(production_data, }\DataTypeTok{select =} \KeywordTok{c}\NormalTok{(opadfinal, ci_nopCategory, ci_nopCatName, ci_itemList, lat, lon))}

\CommentTok{#check merge accuracy}
\CommentTok{#dim(geovector)}
\CommentTok{#dim(data)}
\CommentTok{#head(production_data)}
\CommentTok{#dim(production_data)}
\CommentTok{#table(is.na(production_data$lat))}
\end{Highlighting}
\end{Shaded}

\subsection{2B Load Recipe Dataset from The Flavor
Network.}\label{b-load-recipe-dataset-from-the-flavor-network.}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{recipes <-}\StringTok{ }\KeywordTok{read.csv}\NormalTok{(}\StringTok{"/Users/juan/Documents/GitHub/SustainableCooking-Source_Local_and_Organic/allr_recipes.csv"}\NormalTok{, }\DataTypeTok{stringsAsFactors =} \OtherTok{FALSE}\NormalTok{)}
\CommentTok{#dim(recipes)}
\CommentTok{#table(recipes$region)}
\CommentTok{#subset so only American recipes remain in the dataset}
\NormalTok{recipes <-}\StringTok{ }\KeywordTok{subset}\NormalTok{(recipes, region }\OperatorTok{==}\StringTok{ "American"}\NormalTok{)}
\CommentTok{#dim(recipes)}
\end{Highlighting}
\end{Shaded}

\subsection{2C Load Whole Foods Supermarket
Locations}\label{c-load-whole-foods-supermarket-locations}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{#See here for how to obtain this dataset: https://github.com/juancsherrera/wholefoods}
\NormalTok{whole_foods <-}\StringTok{ }\KeywordTok{read.csv}\NormalTok{(}\StringTok{"/Users/juan/Documents/GitHub/SustainableCooking-Source_Local_and_Organic/wf_geo_public.csv"}\NormalTok{, }\DataTypeTok{stringsAsFactors =} \OtherTok{FALSE}\NormalTok{)}
\CommentTok{#head(whole_foods)}
\end{Highlighting}
\end{Shaded}

\subsection{Map Producers and Whole Foods (random
coordinates)}\label{map-producers-and-whole-foods-random-coordinates}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{#Load base map}
\NormalTok{usa <-}\StringTok{ }\KeywordTok{map_data}\NormalTok{(}\StringTok{"state"}\NormalTok{)}

\CommentTok{#1. ORGANIC PRODUCERS}
\CommentTok{#Prune so ONLY the 48 CONTIGUOUS US STATES REMAIN}
\NormalTok{fig1tot<-production_data[production_data}\OperatorTok{$}\NormalTok{lat}\OperatorTok{>}\DecValTok{20}\NormalTok{,]}
\NormalTok{fig1tot<-fig1tot[fig1tot}\OperatorTok{$}\NormalTok{lat}\OperatorTok{<}\DecValTok{55}\NormalTok{,]}
\NormalTok{fig1tot<-fig1tot[fig1tot}\OperatorTok{$}\NormalTok{lon}\OperatorTok{>-}\DecValTok{125}\NormalTok{,]}
\NormalTok{fig1tot<-fig1tot[fig1tot}\OperatorTok{$}\NormalTok{lon}\OperatorTok{<}\StringTok{ }\DecValTok{1}\OperatorTok{*}\NormalTok{(}\OperatorTok{-}\DecValTok{50}\NormalTok{),]}
\CommentTok{#CREATE NEW DATSET WITH ONLY 48 CONTIGUOUS US STATES}
\NormalTok{production_data_}\DecValTok{48}\NormalTok{ <-}\StringTok{ }\NormalTok{fig1tot}
\CommentTok{#create vector of products in the USDA OID}
\NormalTok{production_data_}\DecValTok{48}\OperatorTok{$}\NormalTok{productvector<-(}\KeywordTok{paste}\NormalTok{(                }
  \KeywordTok{tolower}\NormalTok{(}\KeywordTok{gsub}\NormalTok{(}\StringTok{"[^[:alnum:]]"}\NormalTok{,}\StringTok{""}\NormalTok{, production_data_}\DecValTok{48}\OperatorTok{$}\NormalTok{ci_nopCategory)),}
  \KeywordTok{tolower}\NormalTok{(}\KeywordTok{gsub}\NormalTok{(}\StringTok{"[^[:alnum:]]"}\NormalTok{,}\StringTok{""}\NormalTok{, production_data_}\DecValTok{48}\OperatorTok{$}\NormalTok{ci_nopCatName)),}
  \KeywordTok{tolower}\NormalTok{(}\KeywordTok{gsub}\NormalTok{(}\StringTok{"[^[:alnum:]]"}\NormalTok{,}\StringTok{""}\NormalTok{, production_data_}\DecValTok{48}\OperatorTok{$}\NormalTok{ci_itemList))}
\NormalTok{))}

\CommentTok{#2. WHOLE FOOD SUPERMAKETS}
\CommentTok{#prune so only contiguos US states appear}
\NormalTok{whole_foods_}\DecValTok{48}\NormalTok{<-whole_foods[whole_foods}\OperatorTok{$}\NormalTok{lat}\OperatorTok{>}\DecValTok{20}\NormalTok{,]}
\NormalTok{whole_foods_}\DecValTok{48}\NormalTok{<-whole_foods_}\DecValTok{48}\NormalTok{[whole_foods_}\DecValTok{48}\OperatorTok{$}\NormalTok{lat}\OperatorTok{<}\DecValTok{55}\NormalTok{,]}
\NormalTok{whole_foods_}\DecValTok{48}\NormalTok{<-whole_foods_}\DecValTok{48}\NormalTok{[whole_foods_}\DecValTok{48}\OperatorTok{$}\NormalTok{lon}\OperatorTok{>-}\DecValTok{125}\NormalTok{,]}
\NormalTok{whole_foods_}\DecValTok{48}\NormalTok{<-whole_foods_}\DecValTok{48}\NormalTok{[whole_foods_}\DecValTok{48}\OperatorTok{$}\NormalTok{lon}\OperatorTok{<}\StringTok{ }\DecValTok{1}\OperatorTok{*}\NormalTok{(}\OperatorTok{-}\DecValTok{50}\NormalTok{),]}

\CommentTok{#MAPPING HERE!}
\CommentTok{#Large size}
\KeywordTok{theme_base}\NormalTok{(}\DataTypeTok{base_size =} \DecValTok{3000}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## List of 60
##  $ line                 :List of 6
##   ..$ colour       : chr "black"
##   ..$ size         : num 0.545
##   ..$ linetype     : chr "solid"
##   ..$ lineend      : chr "round"
##   ..$ arrow        : logi FALSE
##   ..$ inherit.blank: logi FALSE
##   ..- attr(*, "class")= chr [1:2] "element_line" "element"
##  $ rect                 :List of 5
##   ..$ fill         : chr "white"
##   ..$ colour       : chr "black"
##   ..$ size         : num 0.545
##   ..$ linetype     : chr "solid"
##   ..$ inherit.blank: logi FALSE
##   ..- attr(*, "class")= chr [1:2] "element_rect" "element"
##  $ text                 :List of 11
##   ..$ family       : chr ""
##   ..$ face         : chr "plain"
##   ..$ colour       : chr "black"
##   ..$ size         : num 3000
##   ..$ hjust        : num 0.5
##   ..$ vjust        : num 0.5
##   ..$ angle        : num 0
##   ..$ lineheight   : num 1
##   ..$ margin       : 'margin' num [1:4] 0pt 0pt 0pt 0pt
##   .. ..- attr(*, "valid.unit")= int 8
##   .. ..- attr(*, "unit")= chr "pt"
##   ..$ debug        : logi FALSE
##   ..$ inherit.blank: logi FALSE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  $ axis.title.x         :List of 11
##   ..$ family       : NULL
##   ..$ face         : NULL
##   ..$ colour       : NULL
##   ..$ size         : NULL
##   ..$ hjust        : NULL
##   ..$ vjust        : num 1
##   ..$ angle        : NULL
##   ..$ lineheight   : NULL
##   ..$ margin       : 'margin' num [1:4] 3pt 0pt 0pt 0pt
##   .. ..- attr(*, "valid.unit")= int 8
##   .. ..- attr(*, "unit")= chr "pt"
##   ..$ debug        : NULL
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  $ axis.title.x.top     :List of 11
##   ..$ family       : NULL
##   ..$ face         : NULL
##   ..$ colour       : NULL
##   ..$ size         : NULL
##   ..$ hjust        : NULL
##   ..$ vjust        : num 0
##   ..$ angle        : NULL
##   ..$ lineheight   : NULL
##   ..$ margin       : 'margin' num [1:4] 0pt 0pt 3pt 0pt
##   .. ..- attr(*, "valid.unit")= int 8
##   .. ..- attr(*, "unit")= chr "pt"
##   ..$ debug        : NULL
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  $ axis.title.y         :List of 11
##   ..$ family       : NULL
##   ..$ face         : NULL
##   ..$ colour       : NULL
##   ..$ size         : NULL
##   ..$ hjust        : NULL
##   ..$ vjust        : num 1
##   ..$ angle        : num 90
##   ..$ lineheight   : NULL
##   ..$ margin       : 'margin' num [1:4] 0pt 3pt 0pt 0pt
##   .. ..- attr(*, "valid.unit")= int 8
##   .. ..- attr(*, "unit")= chr "pt"
##   ..$ debug        : NULL
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  $ axis.title.y.right   :List of 11
##   ..$ family       : NULL
##   ..$ face         : NULL
##   ..$ colour       : NULL
##   ..$ size         : NULL
##   ..$ hjust        : NULL
##   ..$ vjust        : num 0
##   ..$ angle        : num -90
##   ..$ lineheight   : NULL
##   ..$ margin       : 'margin' num [1:4] 0pt 0pt 0pt 3pt
##   .. ..- attr(*, "valid.unit")= int 8
##   .. ..- attr(*, "unit")= chr "pt"
##   ..$ debug        : NULL
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  $ axis.text            :List of 11
##   ..$ family       : NULL
##   ..$ face         : NULL
##   ..$ colour       : NULL
##   ..$ size         : 'rel' num 0.8
##   ..$ hjust        : NULL
##   ..$ vjust        : NULL
##   ..$ angle        : NULL
##   ..$ lineheight   : NULL
##   ..$ margin       : NULL
##   ..$ debug        : NULL
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  $ axis.text.x          :List of 11
##   ..$ family       : NULL
##   ..$ face         : NULL
##   ..$ colour       : NULL
##   ..$ size         : NULL
##   ..$ hjust        : NULL
##   ..$ vjust        : num 1
##   ..$ angle        : NULL
##   ..$ lineheight   : NULL
##   ..$ margin       : 'margin' num [1:4] 2.4pt 0pt 0pt 0pt
##   .. ..- attr(*, "valid.unit")= int 8
##   .. ..- attr(*, "unit")= chr "pt"
##   ..$ debug        : NULL
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  $ axis.text.x.top      :List of 11
##   ..$ family       : NULL
##   ..$ face         : NULL
##   ..$ colour       : NULL
##   ..$ size         : NULL
##   ..$ hjust        : NULL
##   ..$ vjust        : num 0
##   ..$ angle        : NULL
##   ..$ lineheight   : NULL
##   ..$ margin       : 'margin' num [1:4] 0pt 0pt 2.4pt 0pt
##   .. ..- attr(*, "valid.unit")= int 8
##   .. ..- attr(*, "unit")= chr "pt"
##   ..$ debug        : NULL
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  $ axis.text.y          :List of 11
##   ..$ family       : NULL
##   ..$ face         : NULL
##   ..$ colour       : NULL
##   ..$ size         : NULL
##   ..$ hjust        : num 1
##   ..$ vjust        : NULL
##   ..$ angle        : NULL
##   ..$ lineheight   : NULL
##   ..$ margin       : 'margin' num [1:4] 0pt 2.4pt 0pt 0pt
##   .. ..- attr(*, "valid.unit")= int 8
##   .. ..- attr(*, "unit")= chr "pt"
##   ..$ debug        : NULL
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  $ axis.text.y.right    :List of 11
##   ..$ family       : NULL
##   ..$ face         : NULL
##   ..$ colour       : NULL
##   ..$ size         : NULL
##   ..$ hjust        : num 0
##   ..$ vjust        : NULL
##   ..$ angle        : NULL
##   ..$ lineheight   : NULL
##   ..$ margin       : 'margin' num [1:4] 0pt 0pt 0pt 2.4pt
##   .. ..- attr(*, "valid.unit")= int 8
##   .. ..- attr(*, "unit")= chr "pt"
##   ..$ debug        : NULL
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  $ axis.ticks           :List of 6
##   ..$ colour       : NULL
##   ..$ size         : NULL
##   ..$ linetype     : NULL
##   ..$ lineend      : NULL
##   ..$ arrow        : logi FALSE
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_line" "element"
##  $ axis.ticks.length    : 'unit' num 0.5lines
##   ..- attr(*, "valid.unit")= int 3
##   ..- attr(*, "unit")= chr "lines"
##  $ axis.line            : list()
##   ..- attr(*, "class")= chr [1:2] "element_blank" "element"
##  $ axis.line.x          : NULL
##  $ axis.line.y          : NULL
##  $ legend.background    :List of 5
##   ..$ fill         : NULL
##   ..$ colour       : logi NA
##   ..$ size         : NULL
##   ..$ linetype     : NULL
##   ..$ inherit.blank: logi FALSE
##   ..- attr(*, "class")= chr [1:2] "element_rect" "element"
##  $ legend.margin        : 'margin' num [1:4] 6pt 6pt 6pt 6pt
##   ..- attr(*, "valid.unit")= int 8
##   ..- attr(*, "unit")= chr "pt"
##  $ legend.spacing       : 'unit' num 12pt
##   ..- attr(*, "valid.unit")= int 8
##   ..- attr(*, "unit")= chr "pt"
##  $ legend.spacing.x     : NULL
##  $ legend.spacing.y     : NULL
##  $ legend.key           :List of 5
##   ..$ fill         : NULL
##   ..$ colour       : logi NA
##   ..$ size         : NULL
##   ..$ linetype     : NULL
##   ..$ inherit.blank: logi FALSE
##   ..- attr(*, "class")= chr [1:2] "element_rect" "element"
##  $ legend.key.size      : 'unit' num 1.2lines
##   ..- attr(*, "valid.unit")= int 3
##   ..- attr(*, "unit")= chr "lines"
##  $ legend.key.height    : NULL
##  $ legend.key.width     : NULL
##  $ legend.text          :List of 11
##   ..$ family       : NULL
##   ..$ face         : NULL
##   ..$ colour       : NULL
##   ..$ size         : 'rel' num 0.8
##   ..$ hjust        : NULL
##   ..$ vjust        : NULL
##   ..$ angle        : NULL
##   ..$ lineheight   : NULL
##   ..$ margin       : NULL
##   ..$ debug        : NULL
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  $ legend.text.align    : NULL
##  $ legend.title         :List of 11
##   ..$ family       : NULL
##   ..$ face         : NULL
##   ..$ colour       : NULL
##   ..$ size         : NULL
##   ..$ hjust        : num 0
##   ..$ vjust        : NULL
##   ..$ angle        : NULL
##   ..$ lineheight   : NULL
##   ..$ margin       : NULL
##   ..$ debug        : NULL
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  $ legend.title.align   : NULL
##  $ legend.position      : chr "right"
##  $ legend.direction     : NULL
##  $ legend.justification : chr "center"
##  $ legend.box           : NULL
##  $ legend.box.margin    : 'margin' num [1:4] 0cm 0cm 0cm 0cm
##   ..- attr(*, "valid.unit")= int 1
##   ..- attr(*, "unit")= chr "cm"
##  $ legend.box.background: list()
##   ..- attr(*, "class")= chr [1:2] "element_blank" "element"
##  $ legend.box.spacing   : 'unit' num 12pt
##   ..- attr(*, "valid.unit")= int 8
##   ..- attr(*, "unit")= chr "pt"
##  $ panel.background     :List of 5
##   ..$ fill         : NULL
##   ..$ colour       : NULL
##   ..$ size         : NULL
##   ..$ linetype     : NULL
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_rect" "element"
##  $ panel.border         :List of 5
##   ..$ fill         : logi NA
##   ..$ colour       : NULL
##   ..$ size         : NULL
##   ..$ linetype     : NULL
##   ..$ inherit.blank: logi FALSE
##   ..- attr(*, "class")= chr [1:2] "element_rect" "element"
##  $ panel.spacing        : 'unit' num 6pt
##   ..- attr(*, "valid.unit")= int 8
##   ..- attr(*, "unit")= chr "pt"
##  $ panel.spacing.x      : NULL
##  $ panel.spacing.y      : NULL
##  $ panel.grid           : list()
##   ..- attr(*, "class")= chr [1:2] "element_blank" "element"
##  $ panel.grid.minor     :List of 6
##   ..$ colour       : NULL
##   ..$ size         : 'rel' num 0.5
##   ..$ linetype     : NULL
##   ..$ lineend      : NULL
##   ..$ arrow        : logi FALSE
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_line" "element"
##  $ panel.ontop          : logi FALSE
##  $ plot.background      :List of 5
##   ..$ fill         : NULL
##   ..$ colour       : NULL
##   ..$ size         : NULL
##   ..$ linetype     : NULL
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_rect" "element"
##  $ plot.title           :List of 11
##   ..$ family       : NULL
##   ..$ face         : chr "bold"
##   ..$ colour       : NULL
##   ..$ size         : 'rel' num 1.2
##   ..$ hjust        : num 0
##   ..$ vjust        : num 1
##   ..$ angle        : NULL
##   ..$ lineheight   : NULL
##   ..$ margin       : 'margin' num [1:4] 0pt 0pt 6pt 0pt
##   .. ..- attr(*, "valid.unit")= int 8
##   .. ..- attr(*, "unit")= chr "pt"
##   ..$ debug        : NULL
##   ..$ inherit.blank: logi FALSE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  $ plot.subtitle        :List of 11
##   ..$ family       : NULL
##   ..$ face         : NULL
##   ..$ colour       : NULL
##   ..$ size         : NULL
##   ..$ hjust        : num 0
##   ..$ vjust        : num 1
##   ..$ angle        : NULL
##   ..$ lineheight   : NULL
##   ..$ margin       : 'margin' num [1:4] 0pt 0pt 6pt 0pt
##   .. ..- attr(*, "valid.unit")= int 8
##   .. ..- attr(*, "unit")= chr "pt"
##   ..$ debug        : NULL
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  $ plot.caption         :List of 11
##   ..$ family       : NULL
##   ..$ face         : NULL
##   ..$ colour       : NULL
##   ..$ size         : 'rel' num 0.8
##   ..$ hjust        : num 1
##   ..$ vjust        : num 1
##   ..$ angle        : NULL
##   ..$ lineheight   : NULL
##   ..$ margin       : 'margin' num [1:4] 6pt 0pt 0pt 0pt
##   .. ..- attr(*, "valid.unit")= int 8
##   .. ..- attr(*, "unit")= chr "pt"
##   ..$ debug        : NULL
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  $ plot.tag             :List of 11
##   ..$ family       : NULL
##   ..$ face         : NULL
##   ..$ colour       : NULL
##   ..$ size         : 'rel' num 1.2
##   ..$ hjust        : num 0.5
##   ..$ vjust        : num 0.5
##   ..$ angle        : NULL
##   ..$ lineheight   : NULL
##   ..$ margin       : NULL
##   ..$ debug        : NULL
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  $ plot.tag.position    : chr "topleft"
##  $ plot.margin          : 'margin' num [1:4] 6pt 6pt 6pt 6pt
##   ..- attr(*, "valid.unit")= int 8
##   ..- attr(*, "unit")= chr "pt"
##  $ strip.background     :List of 5
##   ..$ fill         : NULL
##   ..$ colour       : logi NA
##   ..$ size         : NULL
##   ..$ linetype     : NULL
##   ..$ inherit.blank: logi FALSE
##   ..- attr(*, "class")= chr [1:2] "element_rect" "element"
##  $ strip.placement      : chr "inside"
##  $ strip.text           :List of 11
##   ..$ family       : NULL
##   ..$ face         : NULL
##   ..$ colour       : NULL
##   ..$ size         : 'rel' num 0.8
##   ..$ hjust        : NULL
##   ..$ vjust        : NULL
##   ..$ angle        : NULL
##   ..$ lineheight   : NULL
##   ..$ margin       : 'margin' num [1:4] 4.8pt 4.8pt 4.8pt 4.8pt
##   .. ..- attr(*, "valid.unit")= int 8
##   .. ..- attr(*, "unit")= chr "pt"
##   ..$ debug        : NULL
##   ..$ inherit.blank: logi FALSE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  $ strip.text.x         : NULL
##  $ strip.text.y         :List of 11
##   ..$ family       : NULL
##   ..$ face         : NULL
##   ..$ colour       : NULL
##   ..$ size         : NULL
##   ..$ hjust        : NULL
##   ..$ vjust        : NULL
##   ..$ angle        : num -90
##   ..$ lineheight   : NULL
##   ..$ margin       : NULL
##   ..$ debug        : NULL
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  $ strip.switch.pad.grid: 'unit' num 3pt
##   ..- attr(*, "valid.unit")= int 8
##   ..- attr(*, "unit")= chr "pt"
##  $ strip.switch.pad.wrap: 'unit' num 3pt
##   ..- attr(*, "valid.unit")= int 8
##   ..- attr(*, "unit")= chr "pt"
##  $ title                :List of 11
##   ..$ family       : NULL
##   ..$ face         : NULL
##   ..$ colour       : NULL
##   ..$ size         : 'rel' num 1
##   ..$ hjust        : NULL
##   ..$ vjust        : NULL
##   ..$ angle        : NULL
##   ..$ lineheight   : NULL
##   ..$ margin       : NULL
##   ..$ debug        : NULL
##   ..$ inherit.blank: logi FALSE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  - attr(*, "class")= chr [1:2] "theme" "gg"
##  - attr(*, "complete")= logi TRUE
##  - attr(*, "validate")= logi TRUE
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{#draw the USA map with state lines}
\NormalTok{fig1fig <-}\StringTok{ }\KeywordTok{ggplot}\NormalTok{() }\OperatorTok{+}\StringTok{ }\KeywordTok{geom_polygon}\NormalTok{(}\DataTypeTok{data =}\NormalTok{ usa, }\KeywordTok{aes}\NormalTok{(}\DataTypeTok{x=}\NormalTok{long, }\DataTypeTok{y =}\NormalTok{ lat, }\DataTypeTok{group =}\NormalTok{ group), }\DataTypeTok{fill =} \StringTok{"white"}\NormalTok{, }\DataTypeTok{color =} \StringTok{"#9fa9a3"}\NormalTok{) }\OperatorTok{+}\StringTok{ }\KeywordTok{coord_fixed}\NormalTok{(}\FloatTok{1.3}\NormalTok{) }
\CommentTok{#add organic producer nodes}
\NormalTok{fig1fig <-}\StringTok{ }\NormalTok{fig1fig }\OperatorTok{+}\StringTok{ }\KeywordTok{geom_point}\NormalTok{(}\DataTypeTok{data =}\NormalTok{ fig1tot, }\KeywordTok{aes}\NormalTok{(}\DataTypeTok{x =}\NormalTok{ lon, }\DataTypeTok{y =}\NormalTok{ lat), }\DataTypeTok{size =} \FloatTok{0.0005}\NormalTok{) }
\CommentTok{#add Whole food supermarkets in another color}
\NormalTok{fig1fig <-}\StringTok{ }\NormalTok{fig1fig }\OperatorTok{+}\StringTok{ }\KeywordTok{geom_point}\NormalTok{(}\DataTypeTok{data =}\NormalTok{ whole_foods_}\DecValTok{48}\NormalTok{, }\KeywordTok{aes}\NormalTok{(}\DataTypeTok{x =}\NormalTok{ lon, }\DataTypeTok{y =}\NormalTok{ lat), }\DataTypeTok{size =} \FloatTok{0.5}\NormalTok{, }\DataTypeTok{color =} \StringTok{"green"}\NormalTok{) }\CommentTok{#add nodes}
\NormalTok{fig1fig <-}\StringTok{ }\NormalTok{fig1fig }\OperatorTok{+}\StringTok{ }\KeywordTok{theme_map}\NormalTok{()}
\NormalTok{fig1fig}
\end{Highlighting}
\end{Shaded}

\includegraphics{Farm2Recipe_files/figure-latex/mapping_producers_and_WholeFoods-1.pdf}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{ggsave}\NormalTok{(}\StringTok{"/Users/juan/Documents/GitHub/SustainableCooking-Source_Local_and_Organic/production_data_USA.eps"}\NormalTok{)}
\KeywordTok{ggsave}\NormalTok{(}\StringTok{"/Users/juan/Documents/GitHub/SustainableCooking-Source_Local_and_Organic/production_data_USA.jpg"}\NormalTok{)}

\KeywordTok{c}\NormalTok{(}\KeywordTok{paste0}\NormalTok{(}\StringTok{"Organic Production in the USA.Number of Producers: "}\NormalTok{,}\KeywordTok{as.character}\NormalTok{(}\KeywordTok{as.matrix}\NormalTok{(}\KeywordTok{dim}\NormalTok{(}\KeywordTok{as.data.frame}\NormalTok{(}\KeywordTok{unique}\NormalTok{(fig1tot}\OperatorTok{$}\NormalTok{opadfinal))))[}\DecValTok{1}\NormalTok{,}\DecValTok{1}\NormalTok{])))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "Organic Production in the USA.Number of Producers: 15490"
\end{verbatim}

\subsection{Problem 1: Find recipe ingredients given a GPS coordinate
and a
recipe}\label{problem-1-find-recipe-ingredients-given-a-gps-coordinate-and-a-recipe}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# 1. select random recipe row from recipe dataset}
\NormalTok{random_recipe <-}\StringTok{ }\NormalTok{recipes[}\KeywordTok{sample}\NormalTok{(}\KeywordTok{nrow}\NormalTok{(recipes), }\DecValTok{1}\NormalTok{), ]}
\CommentTok{#random_recipe}

\CommentTok{# 1. select random GPS coordinate. We are using a dataset of Whole Foods locations}
\NormalTok{random_wf<-}\StringTok{ }\NormalTok{whole_foods[}\KeywordTok{sample}\NormalTok{(}\KeywordTok{nrow}\NormalTok{(whole_foods), }\DecValTok{1}\NormalTok{), ]}
\CommentTok{#random_wf}

\CommentTok{#Create Functions for calculating Haversine distances}
\CommentTok{# Calculates the geodesic distance between two points specified by radian latitude/longitude using the}
\NormalTok{deg2rad <-}\StringTok{ }\ControlFlowTok{function}\NormalTok{(deg) }\KeywordTok{return}\NormalTok{(deg}\OperatorTok{*}\NormalTok{pi}\OperatorTok{/}\DecValTok{180}\NormalTok{)}
\CommentTok{# Haversine formula (hf)}
\NormalTok{haversine <-}\StringTok{ }\ControlFlowTok{function}\NormalTok{(long1, lat1, long2, lat2) \{}
\NormalTok{  R <-}\StringTok{ }\DecValTok{6371} \CommentTok{# Earth mean radius [km]}
\NormalTok{  delta.long <-}\StringTok{ }\NormalTok{(long2 }\OperatorTok{-}\StringTok{ }\NormalTok{long1)}
\NormalTok{  delta.lat <-}\StringTok{ }\NormalTok{(lat2 }\OperatorTok{-}\StringTok{ }\NormalTok{lat1)}
\NormalTok{  a <-}\StringTok{ }\KeywordTok{sin}\NormalTok{(delta.lat}\OperatorTok{/}\DecValTok{2}\NormalTok{)}\OperatorTok{^}\DecValTok{2} \OperatorTok{+}\StringTok{ }\KeywordTok{cos}\NormalTok{(lat1) }\OperatorTok{*}\StringTok{ }\KeywordTok{cos}\NormalTok{(lat2) }\OperatorTok{*}\StringTok{ }\KeywordTok{sin}\NormalTok{(delta.long}\OperatorTok{/}\DecValTok{2}\NormalTok{)}\OperatorTok{^}\DecValTok{2}
\NormalTok{  c <-}\StringTok{ }\DecValTok{2} \OperatorTok{*}\StringTok{ }\KeywordTok{asin}\NormalTok{(}\KeywordTok{min}\NormalTok{(}\DecValTok{1}\NormalTok{,}\KeywordTok{sqrt}\NormalTok{(a)))}
\NormalTok{  d =}\StringTok{ }\NormalTok{R }\OperatorTok{*}\StringTok{ }\NormalTok{c}
  \KeywordTok{return}\NormalTok{(d) }\CommentTok{# Distance in km}
\NormalTok{\}}
\NormalTok{haversine <-}\StringTok{ }\KeywordTok{Vectorize}\NormalTok{(haversine, }\DataTypeTok{SIMPLIFY =}\NormalTok{ F)}

\CommentTok{#head(binder)}
\CommentTok{#drop(binder)}
\CommentTok{#drop(finaldatabase)}

\NormalTok{binder<-}\KeywordTok{as.data.frame}\NormalTok{(production_data_}\DecValTok{48}\NormalTok{[}\DecValTok{0}\NormalTok{,])}
\CommentTok{#dim(random_recipe)}

\ControlFlowTok{for}\NormalTok{(i }\ControlFlowTok{in} \DecValTok{2}\OperatorTok{:}\DecValTok{31}\NormalTok{)}
\NormalTok{\{}
  \ControlFlowTok{if}\NormalTok{ (random_recipe[}\DecValTok{1}\NormalTok{,i] }\OperatorTok{!=}\StringTok{ ""}\NormalTok{)}
\NormalTok{      \{}
\NormalTok{        ingredients_i<-random_recipe[}\DecValTok{1}\NormalTok{,i]}
\NormalTok{        item<-}\StringTok{ }\KeywordTok{gsub}\NormalTok{(}\StringTok{"_"}\NormalTok{,}\StringTok{""}\NormalTok{,random_recipe[}\DecValTok{1}\NormalTok{,i])}
\NormalTok{        binder<-}\KeywordTok{subset}\NormalTok{(production_data_}\DecValTok{48}\NormalTok{, }\KeywordTok{grepl}\NormalTok{(item,production_data_}\DecValTok{48}\OperatorTok{$}\NormalTok{productvector, }\DataTypeTok{fixed =}\NormalTok{ T))}
\NormalTok{        binder}\OperatorTok{$}\NormalTok{wf_lon<-}\KeywordTok{as.numeric}\NormalTok{(random_wf}\OperatorTok{$}\NormalTok{lon)}
\NormalTok{        binder}\OperatorTok{$}\NormalTok{wf_lat<-}\KeywordTok{as.numeric}\NormalTok{(random_wf}\OperatorTok{$}\NormalTok{lat)}
\NormalTok{        binder}\OperatorTok{$}\NormalTok{distance<-}\KeywordTok{as.numeric}\NormalTok{(}\KeywordTok{unlist}\NormalTok{(}\KeywordTok{haversine}\NormalTok{(}\KeywordTok{deg2rad}\NormalTok{(binder}\OperatorTok{$}\NormalTok{wf_lon),}\KeywordTok{deg2rad}\NormalTok{(binder}\OperatorTok{$}\NormalTok{wf_lat),}\KeywordTok{deg2rad}\NormalTok{(binder}\OperatorTok{$}\NormalTok{lon),}\KeywordTok{deg2rad}\NormalTok{(binder}\OperatorTok{$}\NormalTok{lat))))}
\NormalTok{        binder[}\KeywordTok{order}\NormalTok{(binder}\OperatorTok{$}\NormalTok{distance),]}
\NormalTok{        binder}\OperatorTok{$}\NormalTok{ingredient<-random_recipe[}\DecValTok{1}\NormalTok{,i]}
\NormalTok{        binder}\OperatorTok{$}\NormalTok{min_dist<-}\KeywordTok{min}\NormalTok{(binder}\OperatorTok{$}\NormalTok{distance)}
        \ControlFlowTok{if}\NormalTok{ (i }\OperatorTok{==}\StringTok{ }\DecValTok{2}\NormalTok{)}
\NormalTok{        \{}
\NormalTok{          finaldatabase <-}\StringTok{ }\NormalTok{binder}
\NormalTok{        \}}
        \ControlFlowTok{if}\NormalTok{ (i }\OperatorTok{>}\StringTok{ }\DecValTok{2}\NormalTok{)}
\NormalTok{        \{}
\NormalTok{          finaldatabase <-}\StringTok{ }\KeywordTok{rbind}\NormalTok{(finaldatabase,binder)}
\NormalTok{        \}}
        \KeywordTok{drop}\NormalTok{(binder)}
\NormalTok{      \}}
\NormalTok{\}}

\CommentTok{#dim(finaldatabase)}
\NormalTok{mindist_finaldatabase<-}\KeywordTok{subset}\NormalTok{(finaldatabase,finaldatabase}\OperatorTok{$}\NormalTok{distance}\OperatorTok{==}\NormalTok{finaldatabase}\OperatorTok{$}\NormalTok{min_dist)}
\CommentTok{#table(mindist_finaldatabase$ingredient,mindist_finaldatabase$lat)}
\CommentTok{#head(random_recipe)}
\CommentTok{#dim(mindist_finaldatabase)}
\CommentTok{#colnames(mindist_finaldatabase)}
\end{Highlighting}
\end{Shaded}

\subsection{Problem 1: Visualize the
Findings}\label{problem-1-visualize-the-findings}

\begin{verbatim}
## [1] 6797
\end{verbatim}

\begin{verbatim}
## List of 60
##  $ line                 :List of 6
##   ..$ colour       : chr "black"
##   ..$ size         : num 0.545
##   ..$ linetype     : chr "solid"
##   ..$ lineend      : chr "round"
##   ..$ arrow        : logi FALSE
##   ..$ inherit.blank: logi FALSE
##   ..- attr(*, "class")= chr [1:2] "element_line" "element"
##  $ rect                 :List of 5
##   ..$ fill         : chr "white"
##   ..$ colour       : chr "black"
##   ..$ size         : num 0.545
##   ..$ linetype     : chr "solid"
##   ..$ inherit.blank: logi FALSE
##   ..- attr(*, "class")= chr [1:2] "element_rect" "element"
##  $ text                 :List of 11
##   ..$ family       : chr ""
##   ..$ face         : chr "plain"
##   ..$ colour       : chr "black"
##   ..$ size         : num 200
##   ..$ hjust        : num 0.5
##   ..$ vjust        : num 0.5
##   ..$ angle        : num 0
##   ..$ lineheight   : num 1
##   ..$ margin       : 'margin' num [1:4] 0pt 0pt 0pt 0pt
##   .. ..- attr(*, "valid.unit")= int 8
##   .. ..- attr(*, "unit")= chr "pt"
##   ..$ debug        : logi FALSE
##   ..$ inherit.blank: logi FALSE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  $ axis.title.x         :List of 11
##   ..$ family       : NULL
##   ..$ face         : NULL
##   ..$ colour       : NULL
##   ..$ size         : NULL
##   ..$ hjust        : NULL
##   ..$ vjust        : num 1
##   ..$ angle        : NULL
##   ..$ lineheight   : NULL
##   ..$ margin       : 'margin' num [1:4] 3pt 0pt 0pt 0pt
##   .. ..- attr(*, "valid.unit")= int 8
##   .. ..- attr(*, "unit")= chr "pt"
##   ..$ debug        : NULL
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  $ axis.title.x.top     :List of 11
##   ..$ family       : NULL
##   ..$ face         : NULL
##   ..$ colour       : NULL
##   ..$ size         : NULL
##   ..$ hjust        : NULL
##   ..$ vjust        : num 0
##   ..$ angle        : NULL
##   ..$ lineheight   : NULL
##   ..$ margin       : 'margin' num [1:4] 0pt 0pt 3pt 0pt
##   .. ..- attr(*, "valid.unit")= int 8
##   .. ..- attr(*, "unit")= chr "pt"
##   ..$ debug        : NULL
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  $ axis.title.y         :List of 11
##   ..$ family       : NULL
##   ..$ face         : NULL
##   ..$ colour       : NULL
##   ..$ size         : NULL
##   ..$ hjust        : NULL
##   ..$ vjust        : num 1
##   ..$ angle        : num 90
##   ..$ lineheight   : NULL
##   ..$ margin       : 'margin' num [1:4] 0pt 3pt 0pt 0pt
##   .. ..- attr(*, "valid.unit")= int 8
##   .. ..- attr(*, "unit")= chr "pt"
##   ..$ debug        : NULL
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  $ axis.title.y.right   :List of 11
##   ..$ family       : NULL
##   ..$ face         : NULL
##   ..$ colour       : NULL
##   ..$ size         : NULL
##   ..$ hjust        : NULL
##   ..$ vjust        : num 0
##   ..$ angle        : num -90
##   ..$ lineheight   : NULL
##   ..$ margin       : 'margin' num [1:4] 0pt 0pt 0pt 3pt
##   .. ..- attr(*, "valid.unit")= int 8
##   .. ..- attr(*, "unit")= chr "pt"
##   ..$ debug        : NULL
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  $ axis.text            :List of 11
##   ..$ family       : NULL
##   ..$ face         : NULL
##   ..$ colour       : NULL
##   ..$ size         : 'rel' num 0.8
##   ..$ hjust        : NULL
##   ..$ vjust        : NULL
##   ..$ angle        : NULL
##   ..$ lineheight   : NULL
##   ..$ margin       : NULL
##   ..$ debug        : NULL
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  $ axis.text.x          :List of 11
##   ..$ family       : NULL
##   ..$ face         : NULL
##   ..$ colour       : NULL
##   ..$ size         : NULL
##   ..$ hjust        : NULL
##   ..$ vjust        : num 1
##   ..$ angle        : NULL
##   ..$ lineheight   : NULL
##   ..$ margin       : 'margin' num [1:4] 2.4pt 0pt 0pt 0pt
##   .. ..- attr(*, "valid.unit")= int 8
##   .. ..- attr(*, "unit")= chr "pt"
##   ..$ debug        : NULL
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  $ axis.text.x.top      :List of 11
##   ..$ family       : NULL
##   ..$ face         : NULL
##   ..$ colour       : NULL
##   ..$ size         : NULL
##   ..$ hjust        : NULL
##   ..$ vjust        : num 0
##   ..$ angle        : NULL
##   ..$ lineheight   : NULL
##   ..$ margin       : 'margin' num [1:4] 0pt 0pt 2.4pt 0pt
##   .. ..- attr(*, "valid.unit")= int 8
##   .. ..- attr(*, "unit")= chr "pt"
##   ..$ debug        : NULL
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  $ axis.text.y          :List of 11
##   ..$ family       : NULL
##   ..$ face         : NULL
##   ..$ colour       : NULL
##   ..$ size         : NULL
##   ..$ hjust        : num 1
##   ..$ vjust        : NULL
##   ..$ angle        : NULL
##   ..$ lineheight   : NULL
##   ..$ margin       : 'margin' num [1:4] 0pt 2.4pt 0pt 0pt
##   .. ..- attr(*, "valid.unit")= int 8
##   .. ..- attr(*, "unit")= chr "pt"
##   ..$ debug        : NULL
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  $ axis.text.y.right    :List of 11
##   ..$ family       : NULL
##   ..$ face         : NULL
##   ..$ colour       : NULL
##   ..$ size         : NULL
##   ..$ hjust        : num 0
##   ..$ vjust        : NULL
##   ..$ angle        : NULL
##   ..$ lineheight   : NULL
##   ..$ margin       : 'margin' num [1:4] 0pt 0pt 0pt 2.4pt
##   .. ..- attr(*, "valid.unit")= int 8
##   .. ..- attr(*, "unit")= chr "pt"
##   ..$ debug        : NULL
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  $ axis.ticks           :List of 6
##   ..$ colour       : NULL
##   ..$ size         : NULL
##   ..$ linetype     : NULL
##   ..$ lineend      : NULL
##   ..$ arrow        : logi FALSE
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_line" "element"
##  $ axis.ticks.length    : 'unit' num 0.5lines
##   ..- attr(*, "valid.unit")= int 3
##   ..- attr(*, "unit")= chr "lines"
##  $ axis.line            : list()
##   ..- attr(*, "class")= chr [1:2] "element_blank" "element"
##  $ axis.line.x          : NULL
##  $ axis.line.y          : NULL
##  $ legend.background    :List of 5
##   ..$ fill         : NULL
##   ..$ colour       : logi NA
##   ..$ size         : NULL
##   ..$ linetype     : NULL
##   ..$ inherit.blank: logi FALSE
##   ..- attr(*, "class")= chr [1:2] "element_rect" "element"
##  $ legend.margin        : 'margin' num [1:4] 6pt 6pt 6pt 6pt
##   ..- attr(*, "valid.unit")= int 8
##   ..- attr(*, "unit")= chr "pt"
##  $ legend.spacing       : 'unit' num 12pt
##   ..- attr(*, "valid.unit")= int 8
##   ..- attr(*, "unit")= chr "pt"
##  $ legend.spacing.x     : NULL
##  $ legend.spacing.y     : NULL
##  $ legend.key           :List of 5
##   ..$ fill         : NULL
##   ..$ colour       : logi NA
##   ..$ size         : NULL
##   ..$ linetype     : NULL
##   ..$ inherit.blank: logi FALSE
##   ..- attr(*, "class")= chr [1:2] "element_rect" "element"
##  $ legend.key.size      : 'unit' num 1.2lines
##   ..- attr(*, "valid.unit")= int 3
##   ..- attr(*, "unit")= chr "lines"
##  $ legend.key.height    : NULL
##  $ legend.key.width     : NULL
##  $ legend.text          :List of 11
##   ..$ family       : NULL
##   ..$ face         : NULL
##   ..$ colour       : NULL
##   ..$ size         : 'rel' num 0.8
##   ..$ hjust        : NULL
##   ..$ vjust        : NULL
##   ..$ angle        : NULL
##   ..$ lineheight   : NULL
##   ..$ margin       : NULL
##   ..$ debug        : NULL
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  $ legend.text.align    : NULL
##  $ legend.title         :List of 11
##   ..$ family       : NULL
##   ..$ face         : NULL
##   ..$ colour       : NULL
##   ..$ size         : NULL
##   ..$ hjust        : num 0
##   ..$ vjust        : NULL
##   ..$ angle        : NULL
##   ..$ lineheight   : NULL
##   ..$ margin       : NULL
##   ..$ debug        : NULL
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  $ legend.title.align   : NULL
##  $ legend.position      : chr "right"
##  $ legend.direction     : NULL
##  $ legend.justification : chr "center"
##  $ legend.box           : NULL
##  $ legend.box.margin    : 'margin' num [1:4] 0cm 0cm 0cm 0cm
##   ..- attr(*, "valid.unit")= int 1
##   ..- attr(*, "unit")= chr "cm"
##  $ legend.box.background: list()
##   ..- attr(*, "class")= chr [1:2] "element_blank" "element"
##  $ legend.box.spacing   : 'unit' num 12pt
##   ..- attr(*, "valid.unit")= int 8
##   ..- attr(*, "unit")= chr "pt"
##  $ panel.background     :List of 5
##   ..$ fill         : NULL
##   ..$ colour       : NULL
##   ..$ size         : NULL
##   ..$ linetype     : NULL
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_rect" "element"
##  $ panel.border         :List of 5
##   ..$ fill         : logi NA
##   ..$ colour       : NULL
##   ..$ size         : NULL
##   ..$ linetype     : NULL
##   ..$ inherit.blank: logi FALSE
##   ..- attr(*, "class")= chr [1:2] "element_rect" "element"
##  $ panel.spacing        : 'unit' num 6pt
##   ..- attr(*, "valid.unit")= int 8
##   ..- attr(*, "unit")= chr "pt"
##  $ panel.spacing.x      : NULL
##  $ panel.spacing.y      : NULL
##  $ panel.grid           : list()
##   ..- attr(*, "class")= chr [1:2] "element_blank" "element"
##  $ panel.grid.minor     :List of 6
##   ..$ colour       : NULL
##   ..$ size         : 'rel' num 0.5
##   ..$ linetype     : NULL
##   ..$ lineend      : NULL
##   ..$ arrow        : logi FALSE
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_line" "element"
##  $ panel.ontop          : logi FALSE
##  $ plot.background      :List of 5
##   ..$ fill         : NULL
##   ..$ colour       : NULL
##   ..$ size         : NULL
##   ..$ linetype     : NULL
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_rect" "element"
##  $ plot.title           :List of 11
##   ..$ family       : NULL
##   ..$ face         : chr "bold"
##   ..$ colour       : NULL
##   ..$ size         : 'rel' num 1.2
##   ..$ hjust        : num 0
##   ..$ vjust        : num 1
##   ..$ angle        : NULL
##   ..$ lineheight   : NULL
##   ..$ margin       : 'margin' num [1:4] 0pt 0pt 6pt 0pt
##   .. ..- attr(*, "valid.unit")= int 8
##   .. ..- attr(*, "unit")= chr "pt"
##   ..$ debug        : NULL
##   ..$ inherit.blank: logi FALSE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  $ plot.subtitle        :List of 11
##   ..$ family       : NULL
##   ..$ face         : NULL
##   ..$ colour       : NULL
##   ..$ size         : NULL
##   ..$ hjust        : num 0
##   ..$ vjust        : num 1
##   ..$ angle        : NULL
##   ..$ lineheight   : NULL
##   ..$ margin       : 'margin' num [1:4] 0pt 0pt 6pt 0pt
##   .. ..- attr(*, "valid.unit")= int 8
##   .. ..- attr(*, "unit")= chr "pt"
##   ..$ debug        : NULL
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  $ plot.caption         :List of 11
##   ..$ family       : NULL
##   ..$ face         : NULL
##   ..$ colour       : NULL
##   ..$ size         : 'rel' num 0.8
##   ..$ hjust        : num 1
##   ..$ vjust        : num 1
##   ..$ angle        : NULL
##   ..$ lineheight   : NULL
##   ..$ margin       : 'margin' num [1:4] 6pt 0pt 0pt 0pt
##   .. ..- attr(*, "valid.unit")= int 8
##   .. ..- attr(*, "unit")= chr "pt"
##   ..$ debug        : NULL
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  $ plot.tag             :List of 11
##   ..$ family       : NULL
##   ..$ face         : NULL
##   ..$ colour       : NULL
##   ..$ size         : 'rel' num 1.2
##   ..$ hjust        : num 0.5
##   ..$ vjust        : num 0.5
##   ..$ angle        : NULL
##   ..$ lineheight   : NULL
##   ..$ margin       : NULL
##   ..$ debug        : NULL
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  $ plot.tag.position    : chr "topleft"
##  $ plot.margin          : 'margin' num [1:4] 6pt 6pt 6pt 6pt
##   ..- attr(*, "valid.unit")= int 8
##   ..- attr(*, "unit")= chr "pt"
##  $ strip.background     :List of 5
##   ..$ fill         : NULL
##   ..$ colour       : logi NA
##   ..$ size         : NULL
##   ..$ linetype     : NULL
##   ..$ inherit.blank: logi FALSE
##   ..- attr(*, "class")= chr [1:2] "element_rect" "element"
##  $ strip.placement      : chr "inside"
##  $ strip.text           :List of 11
##   ..$ family       : NULL
##   ..$ face         : NULL
##   ..$ colour       : NULL
##   ..$ size         : 'rel' num 0.8
##   ..$ hjust        : NULL
##   ..$ vjust        : NULL
##   ..$ angle        : NULL
##   ..$ lineheight   : NULL
##   ..$ margin       : 'margin' num [1:4] 4.8pt 4.8pt 4.8pt 4.8pt
##   .. ..- attr(*, "valid.unit")= int 8
##   .. ..- attr(*, "unit")= chr "pt"
##   ..$ debug        : NULL
##   ..$ inherit.blank: logi FALSE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  $ strip.text.x         : NULL
##  $ strip.text.y         :List of 11
##   ..$ family       : NULL
##   ..$ face         : NULL
##   ..$ colour       : NULL
##   ..$ size         : NULL
##   ..$ hjust        : NULL
##   ..$ vjust        : NULL
##   ..$ angle        : num -90
##   ..$ lineheight   : NULL
##   ..$ margin       : NULL
##   ..$ debug        : NULL
##   ..$ inherit.blank: logi TRUE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  $ strip.switch.pad.grid: 'unit' num 3pt
##   ..- attr(*, "valid.unit")= int 8
##   ..- attr(*, "unit")= chr "pt"
##  $ strip.switch.pad.wrap: 'unit' num 3pt
##   ..- attr(*, "valid.unit")= int 8
##   ..- attr(*, "unit")= chr "pt"
##  $ title                :List of 11
##   ..$ family       : NULL
##   ..$ face         : NULL
##   ..$ colour       : NULL
##   ..$ size         : 'rel' num 1
##   ..$ hjust        : NULL
##   ..$ vjust        : NULL
##   ..$ angle        : NULL
##   ..$ lineheight   : NULL
##   ..$ margin       : NULL
##   ..$ debug        : NULL
##   ..$ inherit.blank: logi FALSE
##   ..- attr(*, "class")= chr [1:2] "element_text" "element"
##  - attr(*, "class")= chr [1:2] "theme" "gg"
##  - attr(*, "complete")= logi TRUE
##  - attr(*, "validate")= logi TRUE
\end{verbatim}

\includegraphics{Farm2Recipe_files/figure-latex/Mapping ingredient tickets-1.pdf}

\begin{verbatim}
## Coordinate system already present. Adding new coordinate system, which will replace the existing one.
\end{verbatim}

\includegraphics{Farm2Recipe_files/figure-latex/Mapping ingredient tickets-2.pdf}

\begin{verbatim}
##    mindist_finaldatabase$ingredient
## 1                         olive_oil
## 2                         olive_oil
## 3                 green_bell_pepper
## 4                             onion
## 5                             onion
## 6                       cauliflower
## 7                           vinegar
## 8                           vinegar
## 9                      black_pepper
## 10                           carrot
## 11                         cucumber
## 12                      bell_pepper
## 13                      bell_pepper
## 14                         broccoli
##                                                                             supplier
## 1        3133 Industrial Drive  Freeport Illinois United States of America the 61032
## 2        3133 Industrial Drive  Freeport Illinois United States of America the 61032
## 3           9826 East 3000N Rd.  Momence Illinois United States of America the 60954
## 4                 28485 W 119th St  Olathe Kansas United States of America the 66061
## 5                 28485 W 119th St  Olathe Kansas United States of America the 66061
## 6         12459 Elm Branch Road  Windsor Missouri United States of America the 65360
## 7  6400 Collinsville Road  Fairmont City Illinois United States of America the 62201
## 8  6400 Collinsville Road  Fairmont City Illinois United States of America the 62201
## 9               104 Route CC  Greenfield Missouri United States of America the 65661
## 10                1103 Blake  Edwardsville Kansas United States of America the 66111
## 11              7565 Edgerton Rd.  De Soto Kansas United States of America the 66018
## 12      2930 Terrace Street  Kansas City Missouri United States of America the 64108
## 13      2930 Terrace Street  Kansas City Missouri United States of America the 64108
## 14      2930 Terrace Street  Kansas City Missouri United States of America the 64108
##                                                                                                                                                                                                                                         product_offered_by_supplier
## 1                                                                                                                                                                                                                                                Popcorn, Olive Oil
## 2                                                                                                                                                                                                                                            Popcorn with Olive Oil
## 3                                                                                                                                                                                                                        Green Bell Pepper Roasted IQF/Frozen 510.9
## 4                                                                                                                                                                                                                                              Diced Organic Onions
## 5                                                                                                                                                                                                                                              Diced Organic Onions
## 6                                                               Asparagus, Broccoli, Cabbage, Cantaloupe, Cauliflower, Celery, Chives, Corn, Cucumber, Kale, Lettuce, Marjoram, Oats, Parsley, Pasture, Pepper, Summer Squash, Sunflower, Thyme, Tomato, Watermelon
## 7                                                                                                                                                                                                                                 Homestyle Vinegar Flavor (Winter)
## 8                                                                                                                                                                                                                                 Homestyle Vinegar Flavor (Summer)
## 9        Pizza My Heart with Kale and Mustard, Black Pepper with Kale and Mustard, Himalayan Pink Salt with Kale, Garlic with Kale, Onion with Kale, Taco Tuesday with Kale, Seasoning Pepper with Kale and Mustard, Seasoning Salt with Kale, Taco Tuesday Single.
## 10                                                                                                                                                                                                                                                          Carrots
## 11                                                                                                                                                                                                                                  Fruit Vegetables   Cucumbers   
## 12                                                                                                                                                                                                                                              Bell Pepper - Green
## 13                                                                                                                                                                                                                                                Bell Pepper - Red
## 14                                                                                                                                                                                                                                                         Broccoli
##    distance_in_miles total_food_miles
## 1         356.691345         1256.604
## 2         356.691345         1256.604
## 3         407.325750         1256.604
## 4           8.609841         1256.604
## 5           8.609841         1256.604
## 6          74.771521         1256.604
## 7         253.981668         1256.604
## 8         253.981668         1256.604
## 9         115.381868         1256.604
## 10         10.584425         1256.604
## 11         15.202466         1256.604
## 12         14.054889         1256.604
## 13         14.054889         1256.604
## 14         14.054889         1256.604
\end{verbatim}


\end{document}
